<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="shortcut icon" href="/image/iki-sat.ico" type="image/x-icon" />
    <title>Мнемосхема</title>


    <script src="/mnemonic/lib/script/knockout.js"></script>
    <script src="/mnemonic/lib/script/rlab.services.js"></script>
    <script src="/mnemonic/lib/script/rlab.ext.date.js"></script>
    <script src="/mnemonic/lib/script/rlab.knockout.textFormat.js"></script>
    <script src="/mnemonic/lib/script/rlab.knockout.checkboxIndeterminate.js"></script>

    <script src="/mnemonic/lib/script/rlab.knockout.datetimeValue.js"></script>
    <link rel="stylesheet" href="/mnemonic/lib/css/rlab.knockout.datetimeValue.css" type="text/css" />

    <script src="/mnemonic/lib/script/rlab.knockout.timespanValue.js"></script>
    <link rel="stylesheet" href="/mnemonic/lib/css/rlab.knockout.timespanValue.css" type="text/css" />


    <script src="/mnemonic/lib/script/rlab.timeline.js"></script>
    <link rel="stylesheet" href="/mnemonic/lib/css/rlab.timeline.css" type="text/css" />



    <script src="/mnemonic/lib/rlab.nkpori.config.js"></script>
    <script src="/mnemonic/cyclogram/rlab.nkpori.cyclogram.js"></script>
    <link rel="stylesheet" href="/mnemonic/cyclogram/rlab.nkpori.cyclogram.css" type="text/css" />

</head>
<body>
    <h2>Мнемосхема</h2>

    <!--<div>
        <span>Ионосфера-М № </span>
        <select data-bind="options: rlab.nkpori.SCs, optionsValue: 'key', optionsText: 'title', value: spaceCraft"></select>
    </div>-->

    <div>
        <h4>Циклограммы</h4>
        <table class="collapsed-table bordered-table">
            <thead>
                <tr>
                    <th></th>
                    <th>GUID</th>
                    <th>Изменено</th>
                    <th>Название</th>
                    <th>Комментарий</th>
                    <th>Редактор</th>
                </tr>
                <tr></tr>
            </thead>
            <tbody data-bind="foreach:cyclograms">
                <tr>
                    <td>
                        <input type="radio" name="radioCyclogram" data-bind="checkedValue: $data.GUID, checked: $root.selectedCyclogramGUID">
                    </td>

                    <td data-bind="text:GUID"></td>
                    <td data-bind="text:UIModified"></td>
                    <td data-bind="text:Title"></td>
                    <td data-bind="text:comment"></td>
                    <td data-bind="text:Editor"></td>

                </tr>
            </tbody>
        </table>
        <button id="back" data-bind="click: function(){$root.prevCyclogramPage();}">Back</button>
        <button id="next" data-bind="click: function(){$root.nextCyclogramPage();}">Next</button>
        <button data-bind="enable: $root.selectedCyclogramGUID() !== null , click: function(){$root.ShowCyclogramContent($root);}">Загрузить</button>
    </div>

    <span data-bind="text: 'Выбранное время: ' + $root.timeLineOptions.selectedTime()"></span>


    <div data-bind="if: isTimeLineVisible">
        <div data-bind="component: { name: 'timeline', params: timeLineOptions }">
        </div>
    </div>


    <div data-bind="if: isSVGvisible">
        <svg width="640" height="520" viewBox="0 0 640 520" style="border:1px solid black">
            <rect x="0" y="0" width="640" height="520" fill="lightgray"></rect>

            <g data-bind="foreach: mnemoSquares">
                <g data-bind="attr: { transform: position }">
                    <rect x="0" y="0" width="155" height="70" rx="5" ry="5" data-bind="attr: { fill: fill(), stroke: stroke() }"></rect>
                    <circle cx="140" cy="10" r="5" stroke="black" strokeWidth=1 data-bind="attr: { fill: Circle.css() }"></circle>

                    <text text-anchor="middle" x="75" y="18" data-bind="text: Title"></text>
                    <!--<text x="5" y="35" data-bind="text: text"></text>-->
                    <foreignObject x="5" y="25" width="145" height="50">
                        <text data-bind="text: text"></text>
                    </foreignObject>
                </g>
            </g>



            <!--<g transform="translate(440, 180)" class="detailContainer">
                <rect x="0" y="0" width="155" height="70" rx="5" ry="5" fill="grey" stroke="black"></rect>
                <text text-anchor="middle" x="75" y="18">TEST</text>

                <foreignObject x="5" y="25" width="145" height="50">
                    <text data-bind="text: 'This text should wrap after 145 pixels'"></text>
                </foreignObject>
            </g>-->

        </svg>
    </div>

    <script>
        IndexViewModel = new rlab.nkpori.CyclogramModel();
        ko.applyBindings(IndexViewModel);
    </script>
</body>
</html>